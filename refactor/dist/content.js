(()=>{"use strict";({618:function(){var e=this&&this.__awaiter||function(e,n,t,s){return new(t||(t=Promise))((function(i,o){function r(e){try{l(s.next(e))}catch(e){o(e)}}function a(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var n;e.done?i(e.value):(n=e.value,n instanceof t?n:new t((function(e){e(n)}))).then(r,a)}l((s=s.apply(e,n||[])).next())}))};const n=new class{constructor(){this.isVisible=!1,this.activeTab="settings",this.messages=[],this.container=document.createElement("div"),this.container.className="practical-form-sidebar",this.container.style.cssText="\n      position: fixed;\n      top: 0;\n      right: -450px;\n      width: 450px;\n      height: 100vh;\n      background: #FFFFFF;\n      box-shadow: -2px 0 8px rgba(0, 0, 0, 0.15);\n      z-index: 10000;\n      transition: right 0.3s ease;\n      display: flex;\n      flex-direction: column;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;\n    ";const e=document.createElement("div");e.style.cssText="\n      padding: 15px;\n      background: rgb(134,58,74);\n      color: #F5F5F1;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n    ";const n=document.createElement("h1");n.textContent="Practical Forms",n.style.cssText="\n      margin: 0;\n      font-size: 18px;\n      font-weight: bold;\n    ";const t=document.createElement("button");t.innerHTML="Ã—",t.style.cssText="\n      background: none;\n      border: none;\n      color: #F5F5F1;\n      font-size: 24px;\n      cursor: pointer;\n      padding: 0;\n      width: 24px;\n      height: 24px;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    ",e.appendChild(n),e.appendChild(t);const s=document.createElement("div");s.style.cssText="\n      display: flex;\n      border-bottom: 1px solid rgba(134,58,74,0.2);\n    ";const i=(e,n)=>{const t=document.createElement("button");return t.textContent=e,t.style.cssText="\n        flex: 1;\n        padding: 12px;\n        background: none;\n        border: none;\n        border-bottom: 2px solid transparent;\n        color: rgb(134,58,74);\n        cursor: pointer;\n        font-weight: bold;\n        transition: all 0.2s ease;\n      ",t.addEventListener("click",(()=>this.switchTab(n))),t},o=i("Settings","settings"),r=i("Agent","agent");s.appendChild(o),s.appendChild(r);const a=document.createElement("div");a.style.cssText="\n      flex: 1;\n      overflow-y: auto;\n      display: flex;\n      flex-direction: column;\n    ";const l=document.createElement("iframe");l.id="settings-frame",l.src=chrome.runtime.getURL("popup.html"),l.style.cssText="\n      width: 100%;\n      height: 100%;\n      border: none;\n      display: block;\n      flex: 1;\n    ";const c=document.createElement("div");c.id="agent-content",c.style.cssText="\n      display: none;\n      height: 100%;\n      display: flex;\n      flex-direction: column;\n      flex: 1;\n    ",this.chatArea=document.createElement("div"),this.chatArea.style.cssText="\n      flex: 1;\n      overflow-y: auto;\n      padding: 15px;\n      display: flex;\n      flex-direction: column;\n      gap: 10px;\n      background: #F5F5F1;\n    ";const d=document.createElement("div");d.style.cssText="\n      display: flex;\n      gap: 8px;\n      padding: 15px;\n      background: #FFFFFF;\n      border-top: 1px solid rgba(134,58,74,0.2);\n    ";const h=document.createElement("textarea");h.placeholder='Enter your instructions... e.g. "Fill out my name as John Doe"',h.style.cssText="\n      flex: 1;\n      padding: 8px;\n      border: 1px solid rgba(134,58,74,0.3);\n      border-radius: 4px;\n      resize: vertical;\n      min-height: 60px;\n      max-height: 150px;\n      font-family: inherit;\n      font-size: 14px;\n    ";const p=document.createElement("button");p.textContent="Fill Form",p.style.cssText="\n      padding: 8px 16px;\n      background: rgb(134,58,74);\n      color: #F5F5F1;\n      border: none;\n      border-radius: 4px;\n      cursor: pointer;\n      font-weight: bold;\n      height: fit-content;\n      white-space: nowrap;\n    ",d.appendChild(h),d.appendChild(p),c.appendChild(this.chatArea),c.appendChild(d),a.appendChild(l),a.appendChild(c),this.container.appendChild(e),this.container.appendChild(s),this.container.appendChild(a),document.body.appendChild(this.container),t.addEventListener("click",(()=>this.toggle(!1))),p.addEventListener("click",(()=>this.handleSend(h.value))),h.addEventListener("keydown",(e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),this.handleSend(h.value))})),this.switchTab("settings"),this.addMessage("assistant","Hello! I'm here to help you fill out forms. Just tell me what information you want to fill in, and I'll help you do it automatically.")}addMessage(e,n){this.messages.push({role:e,content:n});const t=document.createElement("div");t.style.cssText=`\n      padding: 10px 15px;\n      border-radius: 8px;\n      max-width: 80%;\n      font-size: 14px;\n      line-height: 1.4;\n      ${"assistant"===e?"\n        background: #FFFFFF;\n        color: rgb(134,58,74);\n        align-self: flex-start;\n        border: 1px solid rgba(134,58,74,0.2);\n      ":"\n        background: rgb(134,58,74);\n        color: #FFFFFF;\n        align-self: flex-end;\n      "}\n    `,t.textContent=n,this.chatArea.appendChild(t),this.chatArea.scrollTop=this.chatArea.scrollHeight}handleSend(n){return e(this,void 0,void 0,(function*(){const e=this.container.querySelector("textarea"),s=this.container.querySelector("button:last-child");if(e&&s&&n.trim()){this.addMessage("user",n.trim()),s.disabled=!0,s.textContent="Processing...",e.value="";try{yield t(n.trim()),this.addMessage("assistant","I've filled out the form based on your instructions. Let me know if you need any adjustments!")}catch(e){console.error("Error filling form:",e),this.addMessage("assistant",`Error: ${e.message}`)}finally{s.disabled=!1,s.textContent="Fill Form"}}}))}switchTab(e){this.activeTab=e;const n=document.getElementById("settings-frame"),t=document.getElementById("agent-content");"settings"===e?(n.style.display="block",t.style.display="none"):(n.style.display="none",t.style.display="flex"),this.container.querySelectorAll("button").forEach(((n,t)=>{0===t&&"settings"===e||1===t&&"agent"===e?(n.style.borderBottom="2px solid rgb(134,58,74)",n.style.color="rgb(134,58,74)"):(n.style.borderBottom="2px solid transparent",n.style.color="rgba(134,58,74,0.7)")}))}toggle(e){this.isVisible=null!=e?e:!this.isVisible,this.container.style.right=this.isVisible?"0":"-450px"}setVisibility(e){e!==this.isVisible&&this.toggle(e)}};function t(n){return e(this,void 0,void 0,(function*(){try{const e=document.documentElement.outerHTML,t=yield chrome.runtime.sendMessage({type:"PROCESS_PROMPT",prompt:n,pageDom:e});if(!t.success)throw new Error(t.error||"Unknown error");t.fields&&t.fields.forEach((e=>{const n=document.querySelector(e.selector);n&&(n.value=e.value,n.dispatchEvent(new Event("input",{bubbles:!0})),n.dispatchEvent(new Event("change",{bubbles:!0})))}))}catch(e){throw console.error("Error processing form fill:",e),e}}))}chrome.runtime.onMessage.addListener(((e,s,i)=>"FILL_FORM"===e.type?(t(e.prompt).then((()=>i({success:!0}))).catch((e=>{console.error("Error:",e),i({error:e.message})})),!0):"TOGGLE_FLOATING_BUTTON"===e.type&&(n.setVisibility(e.show),i({success:!0}),!1)))}})[618]()})();